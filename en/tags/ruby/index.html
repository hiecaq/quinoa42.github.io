<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width" />
    
    <link rel="stylesheet" href="https://quinoa42.github.io/style/site.min.css">
    <title>
  Ruby &ndash; Emain Ablach
</title>
  </head>
  <body>
    <header id="header">
      <div class="logo"><a href="https://quinoa42.github.io/">Emain Ablach</a></div>
      <nav class="jumplist">
        <ul>
          
          <li><a href="https://quinoa42.github.io/en/oceanus/">Oceanus</a></li>
          
          <li><a href="https://quinoa42.github.io/en/whimsia/">Whimsia</a></li>
          
        </ul>
      </nav>
    </header>
    <main>
    
  
      <article class="post-item">
        <header>
          <div class="tt">
            <h1><a href="/en/oceanus/ruby-tcl-tk/">Compile ruby with rbenv and brew-installed tcl-tk</a></h1>
            <time>11-22-2017</time>
          </div>
          <div class="reading-info">
            <div class="left">
             <div class="tags">
    &#x1f3f7;
    <nav class="jumplist">
        <ul>
          
    
    
    <li><a href="https://quinoa42.github.io/en/categories/software/">software</a></li>
    


          
    
    
    <li><a href="https://quinoa42.github.io/en/tags/ruby/">Ruby</a></li>
    

    
    
    <li><a href="https://quinoa42.github.io/en/tags/osx/">OSX</a></li>
    


        </ul>
    </nav>
</div>

            </div>
            <div class="right">
              <span>175 words</span>
              <span>
                &bull;
              </span>
              <span>1 min read</span>
            </div>
          </div>
        </header>
        

<p>It happens to be the case where I run into the need of using ruby and tk.Anyway, it tooks me a while to figure out how to compile a ruby by using <code>rbenv</code> and <code>ruby-build</code> with a brew-installed <code>tcl-tk</code> library.</p>

<h2 id="install-tcl-tk">install tcl-tk</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ brew install tcl-tk</code></pre></div>
<p>Then add <code>/usr/local/opt/tcl-tk/bin</code> to your path.</p>

<p>Now if you type <code>wish</code>, a tiny GUI should appear, and also a REPL waiting for your input.</p>

<p>Type</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">% info patchlevel</code></pre></div>
<p>into the REPL, and a version such as <code>8.6.7</code> should appear reflecting the version installed by brew.</p>

<h2 id="compile-ruby">compile ruby</h2>

<p>It turns out that <code>rbenv install</code> (or <code>ruby-build</code>) <a href="https://github.com/rbenv/ruby-build/issues/77#issuecomment-2536838">accept</a> <code>CONFIGURE_OPTS</code> env variable. So we can use this one-line code to compile the ruby:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ CONFIGURE_OPTS<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;--with-tcltkversion=8.6 --with-tcl-lib=/usr/local/opt/tcl-tk/lib --with-tk-lib=/usr/local/opt/tcl-tk/lib --with-tcl-include=/usr/local/opt/tcl-tk/include --with-tk-include=/usr/local/opt/tcl-tk/include&#34;</span> rbenv install <span style="color:#ae81ff">2</span>.2.8</code></pre></div>
<p>in <code>irb</code> with this ruby activated, (e.g. =rbenv local 2.2.8=), you should be able to see output like these with the commands:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">irb(main):<span style="color:#ae81ff">001</span>:<span style="color:#ae81ff">0</span><span style="color:#f92672">&gt;</span> require <span style="color:#e6db74">&#39;tk&#39;</span>
<span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">true</span>
irb(main):<span style="color:#ae81ff">002</span>:<span style="color:#ae81ff">0</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">Tk</span><span style="color:#f92672">::</span><span style="color:#66d9ef">TK_PATCHLEVEL</span>
<span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#34;8.6.7&#34;</span></code></pre></div>
<p>where the version output should match the <code>tcl-tk</code> version installed via <code>brew</code>.</p>

<h2 id="reference">Reference</h2>

<ul>
<li><a href="http://www.tkdocs.com/tutorial/install.html">Installing Tk</a></li>
<li><a href="https://github.com/rbenv/ruby-build/issues/77#issuecomment-2536838">rbenv/ruby-build #77</a></li>
<li><a href="https://qiita.com/ftakao2007/items/230050be7351db49383d">いまさらはじめる Ruby/Tk</a></li>
</ul>

      </article>
  
      <article class="post-item">
        <header>
          <div class="tt">
            <h1><a href="/en/oceanus/ruby-setup/">Ruby Setup</a></h1>
            <time>10-28-2016</time>
          </div>
          <div class="reading-info">
            <div class="left">
             <div class="tags">
    &#x1f3f7;
    <nav class="jumplist">
        <ul>
          
    
    
    <li><a href="https://quinoa42.github.io/en/categories/software/">software</a></li>
    


          
    
    
    <li><a href="https://quinoa42.github.io/en/tags/ruby/">Ruby</a></li>
    


        </ul>
    </nav>
</div>

            </div>
            <div class="right">
              <span>148 words</span>
              <span>
                &bull;
              </span>
              <span>1 min read</span>
            </div>
          </div>
        </header>
        

<p>Here I record what I did to install ruby on my macbook.</p>

<h2 id="rbenv">rbenv</h2>

<p><a href="https://github.com/rbenv/rbenv#readme">rbenv</a> works as a ruby environment manager.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">brew update
brew install rbenv</code></pre></div>
<p>and setup rbenv based on the instruction in:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">rbenv init</code></pre></div>
<h2 id="ruby-build">ruby-build</h2>

<p><a href="https://github.com/rbenv/ruby-build#readme">ruby-build</a> is a plugin that provides rbenv with function <code>rbenv install</code>, which just works as installing differnt version of ruby into rbenv.</p>

<p>if you install rbenv with HomeBrew, it should be already installed, but if not,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">brew install ruby-build</code></pre></div>
<h2 id="install-ruby">install ruby</h2>

<p>To see the list of ruby versions available:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">rbenv install -l</code></pre></div>
<p>To install ruby (for example, 2.3.1):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">rbenv install <span style="color:#ae81ff">2</span>.3.1
rbenv rehash</code></pre></div>
<p>use a certain version of ruby to be used globally:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">rbenv global <span style="color:#ae81ff">2</span>.3.1</code></pre></div>
<h2 id="bundler">bundler</h2>

<p><a href="http://bundler.io/">bundler</a> is a standalone gem that is able to manage gems, and it has can be integrated easily with rbenv via <a href="https://github.com/rbenv/rbenv/wiki/Plugins#bundler-integration">binstubs</a>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">rbenv version <span style="color:#75715e">### check if the current ruby versio</span>
gem install bundler <span style="color:#75715e">##</span></code></pre></div>
      </article>
  

    </main>
    <footer id="footer">
    
    <hr />
    <div><a href="https://github.com/quinoa42">GitHub</a></div>
    <div><a href="https://bgm.tv/user/112851">Bangumi</a></div>
    <div><a href="https://myanimelist.net/profile/quinoa42">MyAnimeList</a></div>
    
    </footer>
  </body>
</html>
